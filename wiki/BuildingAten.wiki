#summary Building Aten
#labels Featured,Phase-Deploy

= Three Step Guide to Building Aten =

==Requirements==
  * GNU Autotools >=2.6 or CMake >=2.4.8
  * Qt4 >=4.2 (plus development packages)
  * A C++ compiler (e.g. GNU g++, Intel's icc)
  * OpenGL
  * pkg-config (for Linux users, and fink/Darwin installations of Qt4 on Macs)


==0. Retrieve the source for Aten==

==1. Install Qt4==

Aten needs Trolltech's Qt4 libraries, which can be downloaded from [http://trolltech.com]. Most Linux distributions will have it installed already, but may not have the development libraries (libqt4-devel) installed as standard.

For the Mac, an installable disk image is available from [http://trolltech.com/developer/downloads/qt/mac], near the bottom of the page. Alternatively, Qt4 is available on Fink (qt4-x11}.


==2. Configure the build (Autotools)==

If you downloaded the source _via_ SVN, first run {{{./autogen.sh}}}.
  * (MAC) It is possible at this point that {{{./autogen.sh}}} will complain that it can't find {{{libtoolize}}}. Fix?

Run {{{./configure}}} to set up the build. The default installation location can be overridden by specifying {{{./configure --prefix=<path>}}}.

===Common Problems===

_(MAC) Location of Qt4 Installation_

  * It is necessary to tell {{{./configure}}} which Qt4 installation to use. If you got the disk image from http://trolltech.com then do {{{./configure -with-qt=framework}}}, if running the Fink package of Qt4 do {{{./configure -with-qt=fink}}}. You may also need to direct the build process to the correct Qt4 development binaries either by setting your $PATH to `/sw/lib/qt4-x11/bin:${PATH}' or by invoking {{{./configure}}} with the {{{-with-qtdir=<path>}}} option.

_(MAC) When running {{{./autogen.sh}}}, {{{autoconf}}} fails with 'configure.ac:16: error: possibly undefined macro: AC DEFINE'_
  * This is related to the version of {{{pkg-config}}} you have installed (e.g. version 0.15.1 gives this error, but version 0.21 does not) with Fink / !MacPorts. Upgrade to the latest version. Incidentally, the line-number reported (16) is not the actual location of the error - {{{autoconf}}} reports this wrongly (the actual error occurs later on with the `PKG CHECK MODULES(GTK28, ..., [AC DEFINE...' command).

_(MAC) Running {{{./autogen.sh}}}, {{{aclocal}}} complains '/sw/share/aclocal/pkg.m4:5: warning: underquoted definition of PKG CHECK MODULES'_
  * If {{{pkgconfig}}} is not installed this is likely to give rise to the said spurious error. Install {{{pkgconfig}}} from Fink / !MacPorts to proceed.

_(MAC) {{{autogen.sh}}} appears successful, but {{{aclocal}}} complains about 'underquoted definition of AM PATH...'_
  * These warnings should not have affected the generation of a working ./configure script. So you may as well move on to the next step.

==2. Configure the build (CMake)==

Run {{{cmake .}}} from the top level directory, or {{{cmake /path/to/aten}}} from your chosen build directory.


==3. Compile==

Once configured successfully, run {{{make}}} to compile the source and build the program. Then, go make some tea or brew some coffee.

===Common Problems===

_(All) When the Qt GUI is building, I get an error 'uic: File generated with too recent version of Qt Designer (4.0 vs. 3.x.x)'_

_(All) Alternatively, 'This file was generated using the moc from 3.X.X. It cannot be used with the include files from this version...'_

  * This error can occur when both the Qt3 and Qt4 development packages are installed The $PATH is sometimes set so that the Qt3 binaries are found first, so the Meta-object compiler from Qt3 is called, and then the generated source includes the Qt4 headers. Running 'which moc' will tell you which binary is being used - you can then run this binary with the -v option to check the version. If its version 3.x.x then you will need to reconfigure the build with {{{./configure -with-qdtir=<path>}}} where <path> is the location of the Qt4 binaries ({{{moc}}}, {{{uic}}}, and {{{rcc}}}). Typically, the Qt3 binaries are located in /usr/lib/qt3/bin while the Qt4 binaries are in /usr/bin, but this may not be the case on your particular flavour of Linux.


==4. Install==

If all was successful, refer to the InstallingAten page!