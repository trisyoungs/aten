<h1>ChangeLog for Release v1.4</h1>

<b>Revision 1055</b>
<ul type='circle'>
	<li>Small fix to src/classes/forcefieldatom.cpp (Windows min/max error).</li>
</ul>

<b>Revision 1052</b>
<ul type='circle'>
	<li>Fixes to MOPAC importmodel filter (from 'mop' input file).</li>
</ul>

<b>Revision 1051</b>
<ul type='circle'>
	<li>ForcefieldAtom's can now be set with their own specific mass (for use in UA forcefields, for example).</li>
	<li>Added new forcefield file block 'uatypes', identical to 'types' block except that mass is also specified.</li>
	<li>Added 'mass' accessor to ForcefieldAtom.</li>
</ul>

<b>Revision 1050</b>
<ul type='circle'>
	<li>Doh - Added necessary code needed for previous commit.</li>
</ul>

<b>Revision 1049</b>
<ul type='circle'>
	<li>Added prefs option 'useFramebuffer' and accompanying command as an alternative to renderPixmap() method when saving images.</li>
</ul>

<b>Revision 1048</b>
<ul type='circle'>
	<li>Update to GAFF forcefield (needs code developments).</li>
	<li>Modified command lexer to allow second lexer (for atomtypes) to be implemented.</li>
</ul>

<b>Revision 1047</b>
<ul type='circle'>
	<li>Small tweaks to fix Windows build.</li>
	<li>Scripts updated.</li>
	<li>Native file dialog now used in Forcefield window.</li>
	<li>Added 'selectmolecule' and 'saveselected' commands.</li>
	<li>Tweaked atom bond penalties for oxygen and nitrogen.</li>
	<li>Fixed - NETA command 'aromatic' was not recognised for atoms.</li>
	<li>Fixed - Ring detection was not setting correct atom environment for aromatic cycles.</li>
	<li>Added some atomtypes to GAFF forcefield, and added test model.</li>
</ul>

<b>Revision 1046</b>
<ul type='circle'>
	<li>Minor doc work.</li>
</ul>

<b>Revision 1045</b>
<ul type='circle'>
	<li>Added root of new doc tree to repo.</li>
	<li>Added ability to interpret redirected stdin as script commands.</li>
</ul>

<b>Revision 1044</b>
<ul type='circle'>
	<li>Added 'toa' command to return a string formatted in the C printf style.</li>
	<li>Added 'filename' accessor to ModelVariable.</li>
	<li>Made 'savemodel' command a little more verbose.</li>
</ul>

<b>Revision 1043</b>
<ul type='circle'>
	<li>Implemented 'replacestr' and 'removestr' command.</li>
</ul>

<b>Revision 1042</b>
<ul type='circle'>
	<li>Extended Dnchar::cat() to accept optional number of characters to copy.</li>
	<li>Added placeholders for 'removestr' and 'replacestr' commands (not yet implemented).</li>
</ul>

<b>Revision 1041</b>
<ul type='circle'>
	<li>Fixed - Forcefields now added to Makefile.am install targets.</li>
	<li>Fixed - 'nextchar' would read multiple consecutive whitespaces as a proper argument, thanks to bug in LineParser::getCharsDelim.</li>
	<li>Fixed - Grids dialog used positive colour in negative colour selector.</li>
</ul>

<b>Revision 1040</b>
<ul type='circle'>
	<li>Fixed - cube import filter had wrong loop indexing.</li>
	<li>Internal Fix - LineParser::getNextDelim used by 'readnext' returned an int, but could only ever return boolean success.</li>
	<li>'readnext' command now returns true or false depending on success.</li>
	<li>Corrected command text for 'readnext'.</li>
</ul>

<b>Revision 1039</b>
<ul type='circle'>
	<li>Fixed - torsion writing in dlpoly expression export was broken from a prior commit.</li>
	<li>Added 'message' command specific to forcefields.</li>
	<li>Included some (mostly complete) forcefields back into main repository (in data/ff).</li>
</ul>

<b>Revision 1038</b>
<ul type='circle'>
	<li>Added xyz trajectory import.</li>
	<li>Fixed - Crash when reading a trajectory containing a bad frame.</li>
</ul>

<b>Revision 1037</b>
<ul type='circle'>
	<li>Modified dlpoly filter to name trajectory frames.</li>
	<li>Removed some debug output from previous commit.</li>
</ul>

<b>Revision 1036</b>
<ul type='circle'>
	<li>Fixed - Undo/redo was not working properly for trajectory frames (hadn't been enabled when adding frames).</li>
	<li>Removed defunct data/prefs.dat from repo.</li>
	<li>Tweaked some GUI icons.</li>
	<li>Fixed - Printed format of estimated trajectory size.</li>
</ul>

<b>Revision 1035</b>
<ul type='circle'>
	<li>Corrected element name of P to phosphorus (not phosphorous).</li>
</ul>

<b>Revision 1034</b>
<ul type='circle'>
	<li>Corrected return value type of 'atoms' accessor in PatternVariable.</li>
	<li>Added output of lists of valid accessors/functions when constructing paths containing invalid steps.</li>
	<li>Modified dlpoly expression export to be a little neater, and to use atom type names in forcefield term output rather than forcefieldbound type names (which may contain wildcards).</li>
	<li>GNU GPL and usage warning is now printed out on startup in the GUI.</li>
</ul>

<b>Revision 1033</b>
<ul type='circle'>
	<li>Added 'value' accessor to MeasurementVariable.</li>
	<li>Internal - Better debug verbosity for some ReturnValue operations.</li>
</ul>

<b>Revision 1032</b>
<ul type='circle'>
	<li>Previous commit also added missing access to 'typenames' in PatternBound variable.</li>
	<li>Fixed - Decrement operators (--) for pointer types.</li>
	<li>Adding missing MeasurementVariable code to StepNode.</li>
	<li>Added/Fixed - Measurements in AKF filter.</li>
</ul>

<b>Revision 1031</b>
<ul type='circle'>
	<li>Improvements to line minimisation for SD and CG algorithms.</li>
	<li>Fixed - Bad bug in CG minimiser which meant new gradient vector was calculated extremely poorly.</li>
</ul>

<b>Revision 1030</b>
<ul type='circle'>
	<li>Fixed - Calling 'createexpression' after using the disordered builder now constructs a full expression (instead of another one containing VDW terms only).</li>
</ul>

<b>Revision 1029</b>
<ul type='circle'>
	<li>Added 'clearexpression' and 'recreateexpression' commands.</li>
	<li>Moved creation of pattern matrices from Pattern::initExpression() to Pattern::createMatrices().</li>
	<li>Combined Pattern::initExpression() and Pattern::fillExpression() into a single function Pattern::createExpression().</li>
	<li>Added a little more verbosity to improper torsion output.</li>
</ul>

<b>Revision 1028</b>
<ul type='circle'>
	<li>Added basic GUI dialog (Help->Command Help) to look through function list.</li>
</ul>

<b>Revision 1027</b>
<ul type='circle'>
	<li>Removed separate storage of improper torsion terms in Pattern and Model lists in favour of just adding them to the torsions array.</li>
	<li>Updated dlpoly expression filter to write improper torsion terms.</li>
</ul>

<b>Revision 1026</b>
<ul type='circle'>
	<li>'createexpression' now accepts optional boolean to control creation of VDW-only expression.</li>
	<li>Added helpful output for all string-searchable enums.</li>
	<li>Corrected error-reporting behaviour of System->Reload Filters.</li>
</ul>

<b>Revision 1025</b>
<ul type='circle'>
	<li>Disordered builder was trying to create a full expression for the target model rather than a VDW-only one, which was unnecessary.</li>
	<li>Allowed usage of normal '%' character in formatting strings by specifying '%%'.</li>
	<li>Fixed - Bug (crash) in improper torsion detection arising from incorrect pointer use.</li>
	<li>Fixed - Broken typing following prior revision correcting uninitialised pointer.</li>
</ul>

<b>Revision 1024</b>
<ul type='circle'>
	<li>Fixed - Uninitialised memory in NETA allowedElements_ array.</li>
</ul>

<b>Revision 1023</b>
<ul type='circle'>
	<li>Added 'ewaldkmax', 'ewaldalpha', and 'ewaldprecision' members to Prefs accessor.</li>
	<li>Set default Ewald kmax to more sensible numbers (5, rather than 0).</li>
	<li>Adjusted Atom::printSummary() and related Model routine to output type id as well as type name.</li>
	<li>Added 'fix' and 'free' commands to fix/free atomic positions during various functions, and added items to atom context menu.</li>
	<li>Removed use of strcasestr() since this breaks some builds (noe uses lowercase() first).</li>
	<li>Added newline to end of base/kvmap.h.</li>
	<li>Added undo/redo for fixing/freeing atoms.</li>
	<li>Fixed atoms are now drawn in specific colour (Prefs::FixedAtomColour).</li>
	<li>Prefs Colours page improved - standard colours amd scale colourpoints now presented in a list.</li>
</ul>

<b>Revision 1022</b>
<ul type='circle'>
	<li>Added 'searchcommands' to search through available commands.</li>
</ul>

<b>Revision 1021</b>
<ul type='circle'>
	<li>Added 'chain' NETA command to specify a linear chain of linked atoms.</li>
	<li>Added improper torsion angle detection and support.</li>
	<li>Added 'ignore' form for bond, angle, and torsion interactions.</li>
	<li>Tweaked line minimiser.</li>
</ul>

<b>Revision 1020</b>
<ul type='circle'>
	<li>Tidied some GUI funcs.</li>
	<li>Added button to control view of parent/trajectory to Trajectory toolbar.</li>
	<li>Default view on model load is to show trajectory if one is available.</li>
</ul>

<b>Revision 1019</b>
<ul type='circle'>
	<li>Added 'mass' and 'nunknown' accessors to Model variable.</li>
	<li>Changed Canvas class to use a Log instead of a simple integer for renderPoint_ storage.</li>
	<li>Moved window refresh functions from GuiQt to AtenForm classes.</li>
	<li>Fixed - undo/redo states for trajectory frames were not used properly in the GUI menu.</li>
</ul>

<b>Revision 1018</b>
<ul type='circle'>
	<li>Fixed minor bug with GL error reporting.</li>
	<li>Fixed - Many GUI functions would not act on displayed trajectory frames, only the main model.</li>
</ul>

<b>Revision 1009</b>
<ul type='circle'>
	<li>Added 'selectradius' command.</li>
</ul>

<b>Revision 1008</b>
<ul type='circle'>
	<li>Added 'axisrotateview' to rotate current view around arbitrary axis passing through the origin.</li>
	<li>Renamed a few view-related functions in Model.</li>
	<li>Added Mat4::createRotationAxis to generate a suitable quaternion.</li>
</ul>

<b>Revision 1007</b>
<ul type='circle'>
	<li>Atom context menu was acting on wrong atoms when a single atom was selected with a right click focus on the atom - fixed.</li>
</ul>

<b>Revision 1006</b>
<ul type='circle'>
	<li>Fixed - KVMap::nPairs() did not return a value.</li>
	<li>Type export mapping now applied to expression export as well.</li>
</ul>

<b>Revision 1005</b>
<ul type='circle'>
	<li>Changed handling of storage of atom names read from files (with --keepnames) - now works for 'newatomfrac' command also.</li>
	<li>Added key/value map class (base/kvmap.h|cpp).</li>
	<li>Added --exportmap and 'exportmap' to allow definition of typename->name conversions (effective for model export only).</li>
	<li>Added basic checking of supplied "x=y" values to --map, --exportmap, 'map', and 'exportmap'.</li>
	<li>Added 'clearexportmap' command.</li>
</ul>

<b>Revision 1004</b>
<ul type='circle'>
	<li>Fixed - Naming of command Forests created without supplying a name (affected naming of items in Scripts menu).</li>
	<li>GUI now properly refreshes after running a script.</li>
</ul>

<b>Revision 1003</b>
<ul type='circle'>
	<li>CLI option --zmap now properly overrides any settings made in filters, and is zmapping style is reset to Auto on GUI startup.</li>
	<li>Fixed - interpretation of 'Scale molecule Centres' checkbox in Transform Cell dialog.</li>
	<li>Added optional argument to 'scale' and 'scalemolecules' commands to request calculation of energy change at each scaling, added corresponding widget to Transform Cell dialog, and updated Model::scaleCell().</li>
</ul>

<b>Revision 1001</b>
<ul type='circle'>
	<li>Small optimisations fo Vector class and Cell::mimd() function.</li>
	<li>Fix to a new silly error in afterLastChar() again, which meant no filter extensions were ever recognised.</li>
</ul>

<b>Revision 1000</b>
<ul type='circle'>
	<li>Version change to 1.4.</li>
</ul>


</section>
