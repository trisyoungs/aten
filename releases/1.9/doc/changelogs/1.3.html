<h1>ChangeLog for Release v1.3</h1>

<b>Revision 996</b>
<ul type='circle'>
	<li> Modified configure.ac to replace link to libncurses, and added pkgconfig to extra/aten.dsc.</li>
</ul>

<b>Revision 991</b>
<ul type='circle'>
	<li> Fixed - Disordered builder now accepts periodic models as components.</li>
	<li> Fixed - Crash when specifying zero molecules in a component for the disordered builder.</li>
	<li> Corrected definitions of 'setregion' and 'setregionfrac' to allow optional 8th argument.</li>
	<li> Added verbosity to saving of forcefield expressions.</li>
	<li> On startup, current model is no longer automatically set to first in the list - scripts and commands will now display the last current model correctly.</li>
	<li> Added some more reporting to GL error debugging.</li>
</ul>

<b>Revision 990</b>
<ul type='circle'>
	<li> Fixed - Enormously stupid error in afterLastChar(), leading to crashes in save dialogs when a filename with no extension was given.</li>
	<li> Added checkbox to SelectFilter dialog to allow/prevent automatic adding of filename extension to filename.</li>
</ul>

<b>Revision 989</b>
<ul type='circle'>
	<li> Added CLI switch 'noqtsettings' to prevent loading of stored window/toolbar positions on startup.</li>
</ul>

<b>Revision 988</b>
<ul type='circle'>
	<li> Fixed - Silly crash caused by using 'delete' as opposed to 'delete[]' in Pattern::fillExpression().</li>
	<li> Added missing internal function calls related to creation of Measurement variables, and renamed variable type specified from '_MEASUREMENT' to 'measurement'.</li>
</ul>

<b>Revision 987</b>
<ul type='circle'>
	<li> Refinements to filter selection processes.</li>
	<li> Added filter selection to expression export.</li>
	<li> Format of saved images now determined by filename extension.</li>
	<li> Better output added when saving models.</li>
</ul>

<b>Revision 986</b>
<ul type='circle'>
	<li> Fixed - 'CRITICAL : runSaveModelDialog' filter recognition idiocy.</li>
	<li> Formats of saved files are now determined (as they probably always should have been) by examining the file extension - if none match, or there isn't one, a dialog (AtenSelectFilter) presents the available formats.</li>
	<li> Added functions to Dhcnar to return upper and lowercase conversions of contained string.</li>
	<li> Added additional member functions to FilterData and Aten (filter-specific) to present/access data in more useful forms.</li>
</ul>

<b>Revision 985</b>
<ul type='circle'>
	<li> Fixed - Monte Carlo acceptance energy levels were not converted on energy unit change in Prefs.</li>
	<li> Fixed memory leaks in MonteCarlo (acceptanceRatio_), Pattern::fillExpression (bonding), and added delete call on gui.app in main().</li>
</ul>

<b>Revision 984</b>
<ul type='circle'>
	<li> Added 'z' accessor to ForcefieldAtom.</li>
	<li> Added bond/angle/torsion/type forcefield term list accessors to patterns and parent model - renamed existing accessors in Model.</li>
	<li> Added 'forcefield' accessors to Model and Pattern.</li>
	<li> ReturnValue now holds Refitem pointer to allow increase/decrease (++/ii) of Reflists.</li>
	<li> Internal change in ForcefieldAtom accessors - ParentFF now FField for consistency.</li>
	<li> Added missing ForcefieldBound accessors.</li>
	<li> Added 'termid' to PatternBound accessors.</li>
	<li> Corrected email address in CMakeLists.txt.</li>
</ul>

<b>Revision 982</b>
<ul type='circle'>
	<li> Removed some defunct filter command definitions from src/command/commands.h.</li>
	<li> Extended 'newatom' and 'newatomfrac' commands to take optional velocty and force triplets.</li>
	<li> Fixed - Saving of prefs values for element data, and conversion of Element type to integer.</li>
	<li> Fixed - Atomic radii were not set properly in the prefs GUI.</li>
</ul>

<b>Revision 981</b>
<ul type='circle'>
	<li> Updated extra/debian.changelog.</li>
	<li> Removed unnecessary linkage to libncurses.</li>
</ul>

<b>Revision 979</b>
<ul type='circle'>
	<li> Corrected extra/aten.dsc to fix building on xUbuntu_8.10, and included in src/gui/about_funcs.cpp to help fix OpenSuSE_Factory and Fedora_11 builds.</li>
	<li> Globally-replaced usage of '%li' in format statements with '%p'.</li>
</ul>

<b>Revision 976</b>
<ul type='circle'>
	<li> Fixed - Missing menubar in Grids window.</li>
</ul>

<b>Revision 974</b>
<ul type='circle'>
	<li> Small corruption in src/base/Makefile.am includes corrected.</li>
</ul>

<b>Revision 972</b>
<ul type='circle'>
	<li> Corrected 'matrixconvert' command argument text.</li>
	<li> Added 'reorient' command, acting like 'matrixconvert' except that source axes are supplied in terms of atoms/ids and destionation matrix is given as a matrix.</li>
	<li> Help command ('help') now doesn't need function name enclosed in brackets and quoted (e.g. now works as 'help printf').</li>
	<li> For commands given on the command-line or through the Command toolbar, a terminal ';' is automatically added if not present.</li>
</ul>

<b>Revision 971</b>
<ul type='circle'>
	<li> Fixed - Placement of angle measurement labels was quirky, swapping labels of adjacent angles.</li>
	<li> Fixed - Some Trajectory controls/menu items were not updated on model change.</li>
</ul>

<b>Revision 970</b>
<ul type='circle'>
	<li> Completed new Grids page.</li>
</ul>

<b>Revision 969</b>
<ul type='circle'>
	<li> Fixes - Grid rendering via colourscale (initialisation of colourscale ID, use within cubeIt()).</li>
	<li> Fixed - Colour dialogs, when canccelled, reset colour to black.</li>
	<li> Colour dialogs now allow setting of alpha value where appropriate.</li>
	<li> Handling of alpha within grid colours corrected.</li>
	<li> Removed 'Transparency' control from Grids window.</li>
	<li> New Grids window layout (UNFINISHED).</li>
</ul>

<b>Revision 968</b>
<ul type='circle'>
	<li> Fixed - Passing double and string values was not implemented!</li>
	<li> Fixed - Grammar did not allow redeclaration and simultaneous assignment of nonlocal variables (including passed values).</li>
</ul>

<b>Revision 967</b>
<ul type='circle'>
	<li> Fixed - Passing double and string values was not implemented!</li>
	<li> Fixed - Grammar did not allow redeclaration and simultaneous assignment of nonlocal variables (including passed values).</li>
</ul>

<b>Revision 966</b>
<ul type='circle'>
	<li> Added '--int', '--double', and '--string' CLI options to enable passing of shell variables.</li>
	<li> Bug - Passed value variable names cannot be redeclared and assigned simultaneously.</li>
</ul>

<b>Revision 965</b>
<ul type='circle'>
	<li> Modified EOF command to be a little more sensible.</li>
</ul>

<b>Revision 964</b>
<ul type='circle'>
	<li> Fixed definition for 'scaleinterpolate'.</li>
	<li> Adjusted 'surface' filter to fail properly if next data point cannot be read.</li>
	<li> Moved version information from main/aten.h to main/version.h to make rebuilding after even minor changes a little less tiresome.</li>
	<li> Corrected filepaths listed in header of files in src/main.</li>
</ul>

<b>Revision 963</b>
<ul type='circle'>
	<li> Added missing calls for GlyphDataVariable accessor searching etc. Added proper recognition of mismatched types in constant array declaration.</li>
	<li> Fixed - Retrieval (resetting) of constant array values involving expressions did not work correctly.</li>
</ul>

<b>Revision 962</b>
<ul type='circle'>
	<li> Supplying a non-existent filter nickname to 'savemodel' now prints out a list of available filter nicknames.</li>
	<li> Added better access to glyph data - new GlyphDataVariable, and reworked Glyph class to use GlyphData as proper members.</li>
	<li> Added 'getenv', 'getenvf', and 'getenvi' commands.</li>
</ul>

<b>Revision 961</b>
<ul type='circle'>
	<li> Added 'fixpattern' command and 'fixed' Pattern accessor to allow whole patterns to be fixed in minimisations.</li>
	<li> Fixed - Missing progress indicator when using disordered builded from CLI.</li>
	<li> Fixed - Win/Mac builds, related to zero-sized function accessor arrays.</li>
	<li> Fixed - Model zoom was not correctly linked to cached trajectory frames.</li>
</ul>

<b>Revision 960</b>
<ul type='circle'>
	<li> Fixed - 'cgminimise' command was not expecting an 'ncycles' argument.</li>
	<li> All minimisation commands now assume a default of 100 cycles if no number is specified.</li>
	<li> Added optional argument to GuiQt::progressUpdate() to store short ETA text instead of printing in order to make some output (e.g. minimisers) a little neater in the CLI.</li>
</ul>

<b>Revision 959</b>
<ul type='circle'>
	<li> Power operator now always returns a real (double) result.</li>
	<li> Adjusted parser to better handle declaration list errors.</li>
	<li> Fixed - Constants with exponentiations were not parsed correctly.</li>
</ul>

<b>Revision 958</b>
<ul type='circle'>
	<li> Added new region example script (scripts/regions2.txt).</li>
	<li> Bug - Locally-scoped variables (e.g. in loops) with initial values are never re-set (behaving effectively as static vars).</li>
</ul>

<b>Revision 957</b>
<ul type='circle'>
	<li> Added missing (empty) function definition arrays to Access classes.</li>
	<li> Added 'regionrotation' command and Region accessors.</li>
	<li> Bug - Region rotations around both x and y axes simultaneosly are incorrect.</li>
</ul>

<b>Revision 956</b>
<ul type='circle'>
	<li> Added basic glyph accessors.</li>
</ul>

<b>Revision 955</b>
<ul type='circle'>
	<li> Added checking for NULL pointers in variable paths.</li>
</ul>

<b>Revision 954</b>
<ul type='circle'>
	<li> Fixed Mac build - headers for proprietary Qt widgets did not have correct path specified for headers in .ui files (since canvas.cpp moved to src/render).</li>
</ul>

<b>Revision 953</b>
<ul type='circle'>
	<li> Tidied TreeNode and Parser.</li>
	<li> Moved CommandNode::checkArguments() to TreeNode and made more general.</li>
	<li> Added code to allow variable accessors which are functions and accept one or more arguments.</li>
	<li> Added 'dotproduct' command.</li>
	<li> Removed old src/command/variables.cpp' from repo.</li>
</ul>

<b>Revision 952</b>
<ul type='circle'>
	<li> 'expand' command now takes optional argument for number of times to perform expansion.</li>
	<li> Fixed bug with selection by element using 'select' command.</li>
	<li> Removed old src/energy directory and files from repo.</li>
	<li> Model::copy() no longer uses a (slow) Clipboard to copy atom/bond data.</li>
	<li> Position window allows coordinates to be locked when centering.</li>
	<li> 'centre' command now takes three optional booleans specifying locked coordinates.</li>
	<li> Added hide/show undo states.</li>
</ul>

<b>Revision 951</b>
<ul type='circle'>
	<li> Torsion angle calculations involving collinear bonds would return NaNs - added check to Vec3&lt;&gt;::normalise() (also for Vec4&lt;&gt;) to check for and catch effective zero magnitudes.</li>
	<li> Another small fix to 'dlpoly' expression export filter.</li>
</ul>

<b>Revision 950</b>
<ul type='circle'>
	<li> Adjusted MC disordered builder to accept component models specified with '0' molecules to allow for dummy regions to be specified.</li>
	<li> MC minimiser would generate errors if a pattern had no molecules - fixed.</li>
	<li> Default value (-1) for parameter to GuiQt::progressUpdate() was not set - fixed.</li>
	<li> Tweaked output of MC disordered builder.</li>
	<li> Fixed crash when attempting to create unique ff term lists without a valid expression.</li>
	<li> Another missing ModelVariable accessor definition added (broke DL_POLY field export, for example).</li>
	<li> Fixes to constraint handling in 'dlpoly' expression export.</li>
</ul>

<b>Revision 949</b>
<ul type='circle'>
	<li> Corrected 'regioncentrefrac' command - was misspelled as 'regioncentreffrac'.</li>
	<li> Ring search routine was 'broken' because of bad logic - fixed.</li>
	<li> Made verbose NETA output a little clearer for element matching.</li>
</ul>

<b>Revision 948</b>
<ul type='circle'>
	<li> Added finer control of arrow-key rotation of model - holding SHIFT now reduces step to 1 degree.</li>
	<li> Spacegroup packing was not correct for Centric spacegroups - fixed.</li>
	<li> Updated scripts/alumina.txt.</li>
	<li> Added prefs limit to ring detection (default = 20).</li>
	<li> Fixed/improved rendering of bonds.</li>
	<li> Corrected some spinedit controls in Prefs window (stepsizes and minimum values for atom/bond radii).</li>
</ul>

<b>Revision 947</b>
<ul type='circle'>
	<li> Added missing accessor definitions to ModelAccessors (missing terms played havoc with nearly all filters).</li>
</ul>

<b>Revision 946</b>
<ul type='circle'>
	<li> Rejiggered measurement storage in Model.</li>
	<li> Added measurements and unique FF term accessors to ModelVariable.</li>
</ul>

<b>Revision 945</b>
<ul type='circle'>
	<li> Some widgets (manually created ones) were still disabled on toolbars after a progress indicator had been called - fixed.</li>
	<li> Add flag in colourscale to turn off interpolation between colour points.</li>
	<li> Partial implementation of non-interpolated colourscales.</li>
</ul>

<b>Revision 944</b>
<ul type='circle'>
	<li> Better disabling of GUI for long operations.</li>
	<li> Progress indicator updated.</li>
	<li> Parser did not recognise character literals enclosed in single quotes - fixed.</li>
	<li> Fixed crash when rendering offscreen and checking whether to draw extra cell-related graphics.</li>
	<li> Added ETA to progress indicators.</li>
	<li> Rewrote Model::replicateCell().</li>
	<li> Fixed bug in Clipboard::pasteToModel() where redoing a translated paste operation would lose the translation.</li>
</ul>

<b>Revision 943</b>
<ul type='circle'>
	<li> Fixes to many compiler warnings (icpc).</li>
</ul>

<b>Revision 942</b>
<ul type='circle'>
	<li> Tidied matrix3.h and matrix4.h, and fixed overflow error in Mat3::invert().</li>
</ul>

<b>Revision 941</b>
<ul type='circle'>
	<li> Removed unused templates/vobject.h.</li>
	<li> Rejigged ComponentRegion - size_ member is now geometry_, and added in rotations_ member.</li>
	<li> Cylinder regions implemented.</li>
	<li> Point generation/checking inside regions improved, and region rotation implemented.</li>
	<li> Rewrote matrix inversion routines to work with standard class data members.</li>
	<li> Updated Disorder window.</li>
	<li> Moved canvas.h|cpp from src/gui to src/render for consistency.</li>
</ul>

<b>Revision 940</b>
<ul type='circle'>
	<li> Fixed parser bug - '=-' would break parsing (e.g. i=-10).</li>
	<li> Saving of command toolbar entries in program prefs was not finished - now it is - default command storage set to 25 items.</li>
	<li> Command toolbar's QCompleter now set to display unfiltered list of entries.</li>
	<li> Saving of program QSettings was not working - add a call to sync().</li>
	<li> Model::selectLine() was mistakenly comparing squared and unsquared distances - fixed.</li>
</ul>

<b>Revision 939</b>
<ul type='circle'>
	<li> Minor fix to text progress indicator update.</li>
	<li> Added inverse trigonometric functions 'acos', 'asin', and 'atan'.</li>
	<li> Memory leak fixed: LineParser was not freeing fstream object on destruction.</li>
	<li> Overflow fixed: creation of text in CellDefine tool window.</li>
	<li> Data members in various places had not been initialised - fixed.</li>
</ul>

<b>Revision 938</b>
<ul type='circle'>
	<li> Fixed undo state messages for atom transformations (extra newline present at end of text).</li>
	<li> Added progress bars to copy/pate operations.</li>
	<li> CLI option '-f/--format' was not taking an argument - fixed.</li>
	<li> Internal improvements to progress indicator usage.</li>
	<li> Increased number of decimal places in some GUI SpinEdits.</li>
	<li> Fixed update of view after changing cell parameters.</li>
</ul>

<b>Revision 937</b>
<ul type='circle'>
	<li> Finished reformatting of command descriptions.</li>
	<li> 'selectline' now fully implemented.</li>
</ul>

<b>Revision 936</b>
<ul type='circle'>
	<li> Partial reformatting of command help descriptions.</li>
</ul>

<b>Revision 935</b>
<ul type='circle'>
	<li> Added 'selectline' command and Model::selectLine() function stub.</li>
</ul>

<b>Revision 934</b>
<ul type='circle'>
	<li> Fixed folding of atoms in fractional coordinates (led to crashes elsewhere).</li>
	<li> Added Model::selectMiller() function and 'selectmiller' and 'millercut' commands.</li>
	<li> Updated CellTransform window.</li>
</ul>

<b>Revision 933</b>
<ul type='circle'>
	<li> Rewrote Model::selectOverlaps() to use bonding cuboids for efficiency.</li>
	<li> Added basic GUI functions and code stubs for performing Miller plane cuts.</li>
</ul>

<b>Revision 932</b>
<ul type='circle'>
	<li> Updated Model::beginUndoState() to accept arguments in the same way as printf() in order to make naming of undostates a little neater in the code.</li>
	<li> Fixed atom flip (using Model::mirrorSelectionLocal).</li>
	<li> Fixed new CLI argument parsing - arguments to options were being grabbed a little too readily.</li>
	<li> Grid variables were not entirely implemented - fixed.</li>
	<li> Added 'gridvisible', fixed 'getgrid'.</li>
</ul>

<b>Revision 931</b>
<ul type='circle'>
	<li> Minor changes to parser lexer - skipped ascii code 13 (carriage return) as whitespace to allow correct parsing of DOS-formatted text files/filters on UNIX machines.</li>
	<li> Adjusted filter location warning text.</li>
	<li> Reworked CLI parsing to accept long options of the form '--opt=value'.</li>
	<li> Changed Cell:fold() to work on multiples of cell lengths so atoms in any position are folded correctly.</li>
	<li> Modified Bison associativity for AND and OR from 'nonassoc' to 'left' to allow multiple consecutive tests.</li>
</ul>

<b>Revision 930</b>
<ul type='circle'>
	<li> Minor changes to parser lexer - skipped ascii code 13 (carriage return) as whitespace to allow correct parsing of DOS-formatted text files/filters on UNIX machines.</li>
	<li> Adjusted filter location warning text.</li>
	<li> Reworked CLI parsing to accept long options of the form '--opt=value'.</li>
</ul>

<b>Revision 929</b>
<ul type='circle'>
	<li> Reverted 'corrupt' root Makefile.am.</li>
</ul>

<b>Revision 928</b>
<ul type='circle'>
	<li> Added QCompleter to command edit in GUI.</li>
	<li> Fixed creation of 'keepnames' forcefields so they are named before (potentially) being set as the default FF.</li>
	<li> Program settings now save command (toolbar) history.</li>
</ul>

<b>Revision 926</b>
<ul type='circle'>
	<li> Added relative path to default search locations for data directory.</li>
</ul>

<b>Revision 924</b>
<ul type='circle'>
	<li> Reverted LineParser to instantiate new (and delete old) fstream object as and when necessary, owing to problems with having an fstream data member to work on many different (sequential) files under Windows.</li>
	<li> Fixed user home directory probing under Windows (wrong environment variable was used).</li>
</ul>

<b>Revision 920</b>
<ul type='circle'>
	<li> Fix to Windows default filter path.</li>
</ul>

<b>Revision 919</b>
<ul type='circle'>
	<li> Reversioned to 1.3.</li>
</ul>

<b>Revision 918</b>
<ul type='circle'>
	<li> Changed version in debian.changelog.</li>
</ul>

</section>
