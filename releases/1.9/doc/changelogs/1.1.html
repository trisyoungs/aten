<h1>ChangeLog for Release v1.1</h1>

<b>Revision 911</b>
<ul type='circle'>
	<li>Adjusted aten.dsc so its ripe for sedding.</li>
</ul>

<b>Revision 910</b>
<ul type='circle'>
	<li>Fix to commit script to ensure proper (global) revision renumbering.</li>
</ul>

<b>Revision 909</b>
<ul type='circle'>
	<li>Update debian build files.</li>
</ul>

<b>Revision 815</b>
<ul type='circle'>
	<li>Colourscale-based colouring of Grid data was not working properly (some flags were not set correctly) - fixed.</li>
	<li>Density-type Grids are now rendered in the colourscale colours (if one is assigned).</li>
	<li>Added 'gridvisible' command, and fixed 'getgrid' and 'grid' (variable creation) commands.</li>
</ul>

<b>Revision 814</b>
<ul type='circle'>
	<li>Minor (but important) change to DL_POLY model export filter.</li>
</ul>

<b>Revision 793</b>
<ul type='circle'>
	<li>Fixed formatting of spacegroup names.</li>
</ul>

<b>Revision 792</b>
<ul type='circle'>
	<li>Added 'nselected' to ModelAccessors.</li>
	<li>Added 'normalise', 'selectioncog' and 'selectioncom' commands.</li>
	<li>Added Model::selectionCom().</li>
	<li>New bonding code was still missing some bonds at the edges of unit cells - fixed.</li>
</ul>

<b>Revision 791</b>
<ul type='circle'>
	<li>Fixed inhibition of atom trimming in cell replication.</li>
	<li>Added more verbose output to 'replicatefold' and 'replicatetrim' commands.</li>
</ul>

<b>Revision 790</b>
<ul type='circle'>
	<li>Fixed badly written Atom::nextSelected() causing endless loops or crashes in some parts of the code.</li>
</ul>

<b>Revision 789</b>
<ul type='circle'>
	<li>Added '-n' switch to create new model (equivalent to -c &quot;newmodel x&quot;).</li>
	<li>Better axis handling in 'pdens' filter.</li>
</ul>

<b>Revision 788</b>
<ul type='circle'>
	<li>Removed Model::firstMarked() in favour of extending Model::firstSelected() with optional 'bool markonly' argument (also related function in Atom).</li>
	<li>Added 'rotatecell' command to rotate cell and its contents about one of the Cartesian axes - final action as yet undecided.</li>
	<li>Fixed bug in new bonding code.</li>
</ul>

<b>Revision 787</b>
<ul type='circle'>
	<li>New rebonding code - approx 100 times faster for large systems.</li>
	<li>Added assignment operator=T to Vec3&lt;T&gt;.</li>
</ul>

<b>Revision 786</b>
<ul type='circle'>
	<li>Fixed bug in Model::resetCamera() which meant that 'setview' would result in the wrong camera y-position (inverted).</li>
</ul>

<b>Revision 785</b>
<ul type='circle'>
	<li>Renamed 'OnImage' properties in Prefs to OffScreen for clarity.</li>
	<li>Added flag in Canvas to specify whether off-screen rendering is being performed (for image saving).</li>
	<li>Grids now create a separate new display list when being rendered for an offscreen image (i.e.</li>
	<li>in a new context).</li>
	<li>Fixed bug with image saving from the GUI where grid data was not drawn (command-line usage was ok).</li>
</ul>

<b>Revision 784</b>
<ul type='circle'>
	<li>Fixed 'gridcolournegative' which cause a crash.</li>
	<li>Added 'reorder' command and Model::reorderSelectedAtoms() to reorder (collapse) bound atoms so that they have consecutive IDs.</li>
	<li>Save bitmap is now a little more informative.</li>
</ul>

<b>Revision 783</b>
<ul type='circle'>
	<li>Transform window now starts in sensible size.</li>
	<li>Some unfinished updates to GUI in this revision.</li>
	<li>-- AtomList now lists by pattern as a separate 'mode' (selection / shift actions not fully re-implemented).</li>
	<li>-- CellTransform has widgets for cell rotation (but no attached functions).</li>
</ul>

<b>Revision 782</b>
<ul type='circle'>
	<li>Undo state in 'expand' command closed in wrong place - fixed.</li>
	<li>Corrected orthographic view which was being drawn back to front.</li>
</ul>

<b>Revision 781</b>
<ul type='circle'>
	<li>Added 'singlealpha' zmapping type, which uses the first alpha character.</li>
	<li>Removed explicit 'zmap ff' command from DL_POLY model filter.</li>
	<li>Fixed small bugs in some commands that required element conversion and used the current zmapping style to convert names (it should have demanded the 'alpha' style).</li>
	<li>Added missing undo state creation for some select commands.</li>
	<li>Added 'deselecttype' command.</li>
</ul>

<b>Revision 780</b>
<ul type='circle'>
	<li>Adjusted tab order in Transform Window.</li>
	<li>Changed copyright notice to include this year.</li>
</ul>

<b>Revision 779</b>
<ul type='circle'>
	<li>More improvements to selecting in Atomlist - undo/redo and select by pattern enabled.</li>
</ul>

<b>Revision 778</b>
<ul type='circle'>
	<li>Fixed small bug in Pattern::angleEnergy() which wrongly reported the lack of implemented terms for 1-3 constraint angles.</li>
	<li>Small fixes to supplied example scripts.</li>
</ul>

<b>Revision 777</b>
<ul type='circle'>
	<li>Added 'mag' (magnitude) accessor to VectorAccess.</li>
</ul>

<b>Revision 776</b>
<ul type='circle'>
	<li>New command 'insertatom' which creates a new atom with the ID specified (moving atoms after it to higher IDs).</li>
</ul>

<b>Revision 775</b>
<ul type='circle'>
	<li>Transform commands 'matrixconvert' and 'matrixtransform' should have been taking minimum image coordinates when working out vectors from atom IDs - fixed.</li>
	<li>Updated Model::selectPattern().</li>
	<li>'select' and 'deselect' commands now accept pattern pointers as targets.</li>
	<li>Potential crash when undoing atom deletion, related to atom / bond creation order - rewrote Model::selectionDelete() to be more efficient and fix issue.</li>
</ul>

<b>Revision 774</b>
<ul type='circle'>
	<li>Added new variable type 'vector' providing a 3-vector {x,y,z}.</li>
	<li>Accessors added to provide retrieval/setting of quantities with vector variables where appropriate.</li>
	<li>Added 'position', 'force', and 'velocity' accessors to AtomAccess.</li>
	<li>Added 'cog' and 'com' accessors to PatternAccess.</li>
	<li>Fixed CA_ATOMSTYLE which was using the wrong atom id (if one was provided).</li>
</ul>

<b>Revision 773</b>
<ul type='circle'>
	<li>The 'map' command now accepts unquoted mappings.</li>
	<li>Adjusted definition of axes with atom IDs in 'matrixconvert' to accept a pair of zeroes for the z-axis, meaning that the cross-product of x and y axes will be used instead.</li>
	<li>Fixed bug in 'getpattern' which was not using pattern IDs in the range 0-&gt;(N-1).</li>
	<li>Tweaked the argument lists for Pattern::calculateCom/Cog() to allow for optional Model pointer.</li>
</ul>

<b>Revision 772</b>
<ul type='circle'>
	<li>Commands 'toend' and 'tostart' should have been 'movetoend' and 'movetostart' - fixed.</li>
</ul>

<b>Revision 771</b>
<ul type='circle'>
	<li>Some test code in surface rendering routines had been inadvertently committed - repaired in this revision.</li>
</ul>

<b>Revision 770</b>
<ul type='circle'>
	<li>Removed debug output from AtenTransform::on_ConvertRotateIntoButton_clicked().</li>
	<li>Axis vectors were not normalised in Matrix Convert in Transform Window (fixed).</li>
	<li>Fixed generation of rotation matrix in Matrix Convert in Transform window.</li>
	<li>Added CA_AXISROTATE, CA_MATRIXTRANSFORM, and CA_MATRIXCONVERT commands.</li>
</ul>

<b>Revision 769</b>
<ul type='circle'>
	<li>Fixed crashes when applying atom style/label changes from the Selection menu.</li>
</ul>

<b>Revision 768</b>
<ul type='circle'>
	<li>First part of Atomlist retrofit - undo and shift-selection from the Atomlist Window are not yet re-implemented.</li>
</ul>

<b>Revision 767</b>
<ul type='circle'>
	<li>Added new ring typing commands - aromatic, aliphatic, nonaromatic.</li>
	<li>Added preliminary detection of ring types.</li>
	<li>Fixed 'acyclic' atom typing keyword (it was ignored).</li>
	<li>Fixed critical bug in Save Model As which was not properly using the selected filename.</li>
</ul>

<b>Revision 766</b>
<ul type='circle'>
	<li>Overhauled file dialog usage for better uniformity - last directory now stored for all dialogs.</li>
	<li>Positive / negative colour controls in Grids window were the wrong way around.</li>
	<li>Rendering of grid data with an alpha component was broken - fixed.</li>
	<li>Implemented forgotten functions to cut, copy, and paste grids from one model to another.</li>
</ul>

<b>Revision 765</b>
<ul type='circle'>
	<li>Fixed more odd actions of atom context menu.</li>
	<li>Measure distances in selection did not work from the Measure Toolbar ('distances' command was ok).</li>
	<li>Undo/redo was not set for Measure in Selection tools on the Measure Toolbar.</li>
	<li>Text is now copyable from message box.</li>
</ul>

<b>Revision 764</b>
<ul type='circle'>
	<li>Fixed some odd actions of atom context menu.</li>
	<li>Minor changes to layout of status bar.</li>
</ul>

<b>Revision 763</b>
<ul type='circle'>
	<li>Fixed deselection modifier for tree selection.</li>
	<li>Better statusbar texts.</li>
</ul>

<b>Revision 762</b>
<ul type='circle'>
	<li>Fixed small memory leak in Canvas::endMode().</li>
	<li>Improved statusbar usefulness.</li>
	<li>Better modified selections - added optional parameter to atom selection functions in Model to request deselection instead (tree deselect [+ctrl] dysfunctional in this revision).</li>
</ul>

<b>Revision 761</b>
<ul type='circle'>
	<li>Added Prefs::zoomThrottle_ to manage speed of zooming (added CA_ZOOMTHROTTLE) and scaled zoom factor relative to camera distance.</li>
	<li>Removed Model::orthoSize_ - transitions (i.e.</li>
	<li>zoom distance) between orthographic and perspective projections now match correctly.</li>
</ul>

<b>Revision 760</b>
<ul type='circle'>
	<li>Added help messages to status bar for current mode (partial implementation).</li>
</ul>

<b>Revision 759</b>
<ul type='circle'>
	<li>Adjusted main() to search for HOMEPATH variable (Windows) if HOME (others) was not found.</li>
	<li>Added call to app-&gt;exit() in AtenForm::closeEvent() to properly exit on Windows.</li>
</ul>

<b>Revision 758</b>
<ul type='circle'>
	<li>Added 'random' implicit variable into all VariableLists.</li>
	<li>Fixed some comparisons in FFBoundAccessors::set().</li>
</ul>

<b>Revision 757</b>
<ul type='circle'>
	<li>Small fix to Windows build.</li>
	<li>Fixed back face culling (now culling GL_FRONT instead of GL_BACK) and enabled by default to inmprove speed - fixes transparency rendering artefacts.</li>
	<li>Converted Prefs::GlOption enum to use bitshifting.</li>
</ul>

<b>Revision 756</b>
<ul type='circle'>
	<li>Fixed twister in text-based progress indicator.</li>
	<li>Significantly improved speed when deleting selections of atoms.</li>
	<li>Mostly implemented new SpecialVariable structure - random number generator still inaccessible.</li>
</ul>

<b>Revision 755</b>
<ul type='circle'>
	<li>Finished set/get for FFBoundAccess.</li>
	<li>Finalised loops of Models in command lists.</li>
</ul>

<b>Revision 754</b>
<ul type='circle'>
	<li>Added extra model management commands: CA_FIRSTMODEL, CA_LASTMODEL, and CA_CURRENTMODEL.</li>
	<li>Fixes to Coulomb sum energies and forces.</li>
	<li>Tweaked CA_AFTERCHAR to work properly when multiple occurrences of the same character were present in the source string (doh!).</li>
	<li>Fixed interactive mode which would execute the cached command even if the command arguments were wrong.</li>
</ul>

<b>Revision 753</b>
<ul type='circle'>
	<li>Fixed '+=' (string concatenation) operator in CA_LETCHAR (and improved Dnchar::cat()).</li>
	<li>Added string functions CA_STRIPCHARS, CA_AFTERCHAR, and CA_BEFORECHAR.</li>
	<li>Minor adjustment to cif filter to strip spaces from HM spacegroup name.</li>
	<li>Tweaked pdb filter to stop complaining (wrongly) that the HEADER record wasn't supplied.</li>
	<li>Tweaked CA_FINALISEMODEL which wasn't saving the filename/path if a partner filter wasn't available.</li>
	<li>Adjusted layout of fdf filter to correctly report the number of chemical species.</li>
	<li>Setting an array value without an index now sets all array items to this value (a la Fortran).</li>
</ul>

<b>Revision 752</b>
<ul type='circle'>
	<li>Removed debug output from GuiQt::saveImage().</li>
	<li>Renamed CA_GRIDTRANSPARENCY to CA_GRIDALPHA, and Grid::setTransparency() and Grid::transparency() to Grid::setAlpha() and Grid::alpha() to make more sense.</li>
</ul>

<b>Revision 751</b>
<ul type='circle'>
	<li>Converted Prefs::ViewObject enum back into sequential ints, and adjusted related set/get to use bitshifting.</li>
	<li>Fixed CA_SHOWONSCREEN and CA_SHOWONIMAGE crashes.</li>
</ul>

<b>Revision 750</b>
<ul type='circle'>
	<li>CA_LOADFF now returns a fail when the forcefield couldn't be loaded (corrected bug in Aten::loadForcefield()).</li>
	<li>In PatternAccess, 'firstatomid' and 'lastatomid' were returning the internal index [0 to N-1] rather than [1-N] - fixed.</li>
</ul>

<b>Revision 747</b>
<ul type='circle'>
	<li>Corrected About dialog for new website.</li>
</ul>

<b>Revision 746</b>
<ul type='circle'>
	<li>Adjusted changeversion script and updated debian-related build files.</li>
</ul>

</section>
