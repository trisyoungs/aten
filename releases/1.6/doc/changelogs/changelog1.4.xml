<section id="changelogs.1.4"><title>Version 1.4</title>
	<indexterm zone="changelogs.1.4"><primary>changelogs</primary><secondary>1.4</secondary></indexterm>

	<para>Detailed SVN ChangeLog follows:</para>
	
	<para><emphasis>Revision 1055</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Small fix to src/classes/forcefieldatom.cpp (Windows min/max error).</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1052</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixes to MOPAC importmodel filter (from 'mop' input file).</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1051</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>ForcefieldAtom's can now be set with their own specific mass (for use in UA forcefields, for example).</para>
		</listitem>
		<listitem>
			<para>Added new forcefield file block 'uatypes', identical to 'types' block except that mass is also specified.</para>
		</listitem>
		<listitem>
			<para>Added 'mass' accessor to ForcefieldAtom.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1050</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Doh - Added necessary code needed for previous commit.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1049</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added prefs option 'useFramebuffer' and accompanying command as an alternative to renderPixmap() method when saving images.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1048</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Update to GAFF forcefield (needs code developments).</para>
		</listitem>
		<listitem>
			<para>Modified command lexer to allow second lexer (for atomtypes) to be implemented.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1047</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Small tweaks to fix Windows build.</para>
		</listitem>
		<listitem>
			<para>Scripts updated.</para>
		</listitem>
		<listitem>
			<para>Native file dialog now used in Forcefield window.</para>
		</listitem>
		<listitem>
			<para>Added 'selectmolecule' and 'saveselected' commands.</para>
		</listitem>
		<listitem>
			<para>Tweaked atom bond penalties for oxygen and nitrogen.</para>
		</listitem>
		<listitem>
			<para>Fixed - NETA command 'aromatic' was not recognised for atoms.</para>
		</listitem>
		<listitem>
			<para>Fixed - Ring detection was not setting correct atom environment for aromatic cycles.</para>
		</listitem>
		<listitem>
			<para>Added some atomtypes to GAFF forcefield, and added test model.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1046</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Minor doc work.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1045</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added root of new doc tree to repo.</para>
		</listitem>
		<listitem>
			<para>Added ability to interpret redirected stdin as script commands.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1044</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'toa' command to return a string formatted in the C printf style.</para>
		</listitem>
		<listitem>
			<para>Added 'filename' accessor to ModelVariable.</para>
		</listitem>
		<listitem>
			<para>Made 'savemodel' command a little more verbose.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1043</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Implemented 'replacestr' and 'removestr' command.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1042</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Extended Dnchar::cat() to accept optional number of characters to copy.</para>
		</listitem>
		<listitem>
			<para>Added placeholders for 'removestr' and 'replacestr' commands (not yet implemented).</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1041</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - Forcefields now added to Makefile.am install targets.</para>
		</listitem>
		<listitem>
			<para>Fixed - 'nextchar' would read multiple consecutive whitespaces as a proper argument, thanks to bug in LineParser::getCharsDelim.</para>
		</listitem>
		<listitem>
			<para>Fixed - Grids dialog used positive colour in negative colour selector.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1040</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - cube import filter had wrong loop indexing.</para>
		</listitem>
		<listitem>
			<para>Internal Fix - LineParser::getNextDelim used by 'readnext' returned an int, but could only ever return boolean success.</para>
		</listitem>
		<listitem>
			<para>'readnext' command now returns true or false depending on success.</para>
		</listitem>
		<listitem>
			<para>Corrected command text for 'readnext'.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1039</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - torsion writing in dlpoly expression export was broken from a prior commit.</para>
		</listitem>
		<listitem>
			<para>Added 'message' command specific to forcefields.</para>
		</listitem>
		<listitem>
			<para>Included some (mostly complete) forcefields back into main repository (in data/ff).</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1038</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added xyz trajectory import.</para>
		</listitem>
		<listitem>
			<para>Fixed - Crash when reading a trajectory containing a bad frame.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1037</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Modified dlpoly filter to name trajectory frames.</para>
		</listitem>
		<listitem>
			<para>Removed some debug output from previous commit.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1036</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - Undo/redo was not working properly for trajectory frames (hadn't been enabled when adding frames).</para>
		</listitem>
		<listitem>
			<para>Removed defunct data/prefs.dat from repo.</para>
		</listitem>
		<listitem>
			<para>Tweaked some GUI icons.</para>
		</listitem>
		<listitem>
			<para>Fixed - Printed format of estimated trajectory size.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1035</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Corrected element name of P to phosphorus (not phosphorous).</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1034</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Corrected return value type of 'atoms' accessor in PatternVariable.</para>
		</listitem>
		<listitem>
			<para>Added output of lists of valid accessors/functions when constructing paths containing invalid steps.</para>
		</listitem>
		<listitem>
			<para>Modified dlpoly expression export to be a little neater, and to use atom type names in forcefield term output rather than forcefieldbound type names (which may contain wildcards).</para>
		</listitem>
		<listitem>
			<para>GNU GPL and usage warning is now printed out on startup in the GUI.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1033</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'value' accessor to MeasurementVariable.</para>
		</listitem>
		<listitem>
			<para>Internal - Better debug verbosity for some ReturnValue operations.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1032</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Previous commit also added missing access to 'typenames' in PatternBound variable.</para>
		</listitem>
		<listitem>
			<para>Fixed - Decrement operators (--) for pointer types.</para>
		</listitem>
		<listitem>
			<para>Adding missing MeasurementVariable code to StepNode.</para>
		</listitem>
		<listitem>
			<para>Added/Fixed - Measurements in AKF filter.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1031</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Improvements to line minimisation for SD and CG algorithms.</para>
		</listitem>
		<listitem>
			<para>Fixed - Bad bug in CG minimiser which meant new gradient vector was calculated extremely poorly.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1030</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - Calling 'createexpression' after using the disordered builder now constructs a full expression (instead of another one containing VDW terms only).</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1029</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'clearexpression' and 'recreateexpression' commands.</para>
		</listitem>
		<listitem>
			<para>Moved creation of pattern matrices from Pattern::initExpression() to Pattern::createMatrices().</para>
		</listitem>
		<listitem>
			<para>Combined Pattern::initExpression() and Pattern::fillExpression() into a single function Pattern::createExpression().</para>
		</listitem>
		<listitem>
			<para>Added a little more verbosity to improper torsion output.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1028</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added basic GUI dialog (Help->Command Help) to look through function list.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1027</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Removed separate storage of improper torsion terms in Pattern and Model lists in favour of just adding them to the torsions array.</para>
		</listitem>
		<listitem>
			<para>Updated dlpoly expression filter to write improper torsion terms.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1026</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>'createexpression' now accepts optional boolean to control creation of VDW-only expression.</para>
		</listitem>
		<listitem>
			<para>Added helpful output for all string-searchable enums.</para>
		</listitem>
		<listitem>
			<para>Corrected error-reporting behaviour of System->Reload Filters.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1025</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Disordered builder was trying to create a full expression for the target model rather than a VDW-only one, which was unnecessary.</para>
		</listitem>
		<listitem>
			<para>Allowed usage of normal '%' character in formatting strings by specifying '%%'.</para>
		</listitem>
		<listitem>
			<para>Fixed - Bug (crash) in improper torsion detection arising from incorrect pointer use.</para>
		</listitem>
		<listitem>
			<para>Fixed - Broken typing following prior revision correcting uninitialised pointer.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1024</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - Uninitialised memory in NETA allowedElements_ array.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1023</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'ewaldkmax', 'ewaldalpha', and 'ewaldprecision' members to Prefs accessor.</para>
		</listitem>
		<listitem>
			<para>Set default Ewald kmax to more sensible numbers (5, rather than 0).</para>
		</listitem>
		<listitem>
			<para>Adjusted Atom::printSummary() and related Model routine to output type id as well as type name.</para>
		</listitem>
		<listitem>
			<para>Added 'fix' and 'free' commands to fix/free atomic positions during various functions, and added items to atom context menu.</para>
		</listitem>
		<listitem>
			<para>Removed use of strcasestr() since this breaks some builds (noe uses lowercase() first).</para>
		</listitem>
		<listitem>
			<para>Added newline to end of base/kvmap.h.</para>
		</listitem>
		<listitem>
			<para>Added undo/redo for fixing/freeing atoms.</para>
		</listitem>
		<listitem>
			<para>Fixed atoms are now drawn in specific colour (Prefs::FixedAtomColour).</para>
		</listitem>
		<listitem>
			<para>Prefs Colours page improved - standard colours amd scale colourpoints now presented in a list.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1022</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'searchcommands' to search through available commands.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1021</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'chain' NETA command to specify a linear chain of linked atoms.</para>
		</listitem>
		<listitem>
			<para>Added improper torsion angle detection and support.</para>
		</listitem>
		<listitem>
			<para>Added 'ignore' form for bond, angle, and torsion interactions.</para>
		</listitem>
		<listitem>
			<para>Tweaked line minimiser.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1020</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Tidied some GUI funcs.</para>
		</listitem>
		<listitem>
			<para>Added button to control view of parent/trajectory to Trajectory toolbar.</para>
		</listitem>
		<listitem>
			<para>Default view on model load is to show trajectory if one is available.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1019</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'mass' and 'nunknown' accessors to Model variable.</para>
		</listitem>
		<listitem>
			<para>Changed Canvas class to use a Log instead of a simple integer for renderPoint_ storage.</para>
		</listitem>
		<listitem>
			<para>Moved window refresh functions from GuiQt to AtenForm classes.</para>
		</listitem>
		<listitem>
			<para>Fixed - undo/redo states for trajectory frames were not used properly in the GUI menu.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1018</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed minor bug with GL error reporting.</para>
		</listitem>
		<listitem>
			<para>Fixed - Many GUI functions would not act on displayed trajectory frames, only the main model.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1009</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'selectradius' command.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1008</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Added 'axisrotateview' to rotate current view around arbitrary axis passing through the origin.</para>
		</listitem>
		<listitem>
			<para>Renamed a few view-related functions in Model.</para>
		</listitem>
		<listitem>
			<para>Added Mat4::createRotationAxis to generate a suitable quaternion.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1007</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Atom context menu was acting on wrong atoms when a single atom was selected with a right click focus on the atom - fixed.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1006</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - KVMap::nPairs() did not return a value.</para>
		</listitem>
		<listitem>
			<para>Type export mapping now applied to expression export as well.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1005</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Changed handling of storage of atom names read from files (with --keepnames) - now works for 'newatomfrac' command also.</para>
		</listitem>
		<listitem>
			<para>Added key/value map class (base/kvmap.h|cpp).</para>
		</listitem>
		<listitem>
			<para>Added --exportmap and 'exportmap' to allow definition of typename->name conversions (effective for model export only).</para>
		</listitem>
		<listitem>
			<para>Added basic checking of supplied "x=y" values to --map, --exportmap, 'map', and 'exportmap'.</para>
		</listitem>
		<listitem>
			<para>Added 'clearexportmap' command.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1004</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Fixed - Naming of command Forests created without supplying a name (affected naming of items in Scripts menu).</para>
		</listitem>
		<listitem>
			<para>GUI now properly refreshes after running a script.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1003</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>CLI option --zmap now properly overrides any settings made in filters, and is zmapping style is reset to Auto on GUI startup.</para>
		</listitem>
		<listitem>
			<para>Fixed - interpretation of 'Scale molecule Centres' checkbox in Transform Cell dialog.</para>
		</listitem>
		<listitem>
			<para>Added optional argument to 'scale' and 'scalemolecules' commands to request calculation of energy change at each scaling, added corresponding widget to Transform Cell dialog, and updated Model::scaleCell().</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1001</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Small optimisations fo Vector class and Cell::mimd() function.</para>
		</listitem>
		<listitem>
			<para>Fix to a new silly error in afterLastChar() again, which meant no filter extensions were ever recognised.</para>
		</listitem>
	</itemizedlist>

	<para><emphasis>Revision 1000</emphasis></para>
	<itemizedlist mark='opencircle'>
		<listitem>
			<para>Version change to 1.4.</para>
		</listitem>
	</itemizedlist>

	
</section>
